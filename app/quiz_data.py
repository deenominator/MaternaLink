

QUIZ_QUESTIONS = {
    1: [
                {
    "id": 1,
    "text": "Vaginal bleeding?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Light spotting", "value": 1},
        {"label": "Moderate bleeding", "value": 2},
        {"label": "Heavy bleeding/clots", "value": 3}
    ]
},
{
    "id": 2,
    "text": "Lower abdominal pain?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Mild cramps", "value": 1},
        {"label": "Persistent pain", "value": 2},
        {"label": "Severe unilateral pain", "value": 3}
    ]
},
{
    "id": 3,
    "text": "Severe nausea/vomiting?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Occasional", "value": 1},
        {"label": "Frequent", "value": 2},
        {"label": "Unable to keep fluids", "value": 3}
    ]
},
{
    "id": 4,
    "text": "Fever (>38Â°C)?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Once", "value": 1},
        {"label": "Persistent", "value": 2},
        {"label": "With rash/body ache", "value": 3}
    ]
},
{
    "id": 5,
    "text": "Painful urination or UTI symptoms?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Mild burning", "value": 1},
        {"label": "Confirmed infection", "value": 2},
        {"label": "Fever + flank pain", "value": 3}
    ]
},
{
    "id": 6,
    "text": "Dizziness or fainting?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Occasional", "value": 1},
        {"label": "Frequent", "value": 2},
        {"label": "Loss of consciousness", "value": 3}
    ]
},
{
    "id": 7,
    "text": "History of miscarriage?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "One", "value": 1},
        {"label": "Two", "value": 2},
        {"label": "Three or more", "value": 3}
    ]
},
{
    "id": 8,
    "text": "Thyroid disorder?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Controlled", "value": 1},
        {"label": "Recently diagnosed", "value": 2},
        {"label": "Uncontrolled", "value": 3}
    ]
},
{
    "id": 9,
    "text": "Chronic conditions (diabetes, hypertension)?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "One controlled", "value": 1},
        {"label": "One uncontrolled", "value": 2},
        {"label": "Multiple uncontrolled", "value": 3}
    ]
},
{
    "id": 10,
    "text": "Exposure to infections (rubella, toxoplasmosis, etc.)?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Possible exposure", "value": 1},
        {"label": "Confirmed exposure", "value": 2},
        {"label": "Symptomatic", "value": 3}
    ]
}
    ],
    2: [
              {
    "id": 11,
    "text": "Swelling in face/hands?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Mild", "value": 1},
        {"label": "Persistent", "value": 2},
        {"label": "With headache/vision issues", "value": 3}
    ]
},
{
    "id": 12,
    "text": "Headaches?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Occasional", "value": 1},
        {"label": "Frequent", "value": 2},
        {"label": "Severe + blurred vision", "value": 3}
    ]
},
{
    "id": 13,
    "text": "Fetal movement?",
    "options": [
        {"label": "Normal", "value": 0},
        {"label": "Slight decrease", "value": 1},
        {"label": "Noticeably reduced", "value": 2},
        {"label": "Absent", "value": 3}
    ]
},
{
    "id": 14,
    "text": "Blood pressure readings?",
    "options": [
        {"label": "Normal", "value": 0},
        {"label": "Slightly elevated", "value": 1},
        {"label": "Hypertension diagnosed", "value": 2},
        {"label": "Severe (>160/110)", "value": 3}
    ]
},
{
    "id": 15,
    "text": "Blood sugar levels?",
    "options": [
        {"label": "Normal", "value": 0},
        {"label": "Borderline", "value": 1},
        {"label": "Gestational diabetes", "value": 2},
        {"label": "Poorly controlled", "value": 3}
    ]
},
{
    "id": 16,
    "text": "Vaginal discharge abnormal (odor/color)?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Mild change", "value": 1},
        {"label": "Persistent abnormal", "value": 2},
        {"label": "With itching/pain", "value": 3}
    ]
},
{
    "id": 17,
    "text": "Abdominal tightening?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Irregular", "value": 1},
        {"label": "Frequent", "value": 2},
        {"label": "Regular painful contractions", "value": 3}
    ]
},
{
    "id": 18,
    "text": "Shortness of breath?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "On exertion", "value": 1},
        {"label": "At rest occasionally", "value": 2},
        {"label": "Severe or sudden", "value": 3}
    ]
},
{
    "id": 19,
    "text": "Trauma or fall?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Minor", "value": 1},
        {"label": "Moderate impact", "value": 2},
        {"label": "Abdominal trauma", "value": 3}
    ]
},
{
    "id": 20,
    "text": "Placenta issues (if diagnosed)?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Low-lying placenta", "value": 1},
        {"label": "Placenta previa", "value": 2},
        {"label": "Bleeding with placenta issue", "value": 3}
    ]
}
    ],
    3: [
                {
    "id": 21,
    "text": "Severe headache or visual disturbances?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Mild", "value": 1},
        {"label": "Persistent", "value": 2},
        {"label": "Severe sudden", "value": 3}
    ]
},
{
    "id": 22,
    "text": "Sudden swelling (face/hands)?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Mild", "value": 1},
        {"label": "Rapid increase", "value": 2},
        {"label": "With BP issues", "value": 3}
    ]
},
{
    "id": 23,
    "text": "Decreased fetal movement?",
    "options": [
        {"label": "Normal", "value": 0},
        {"label": "Slightly less", "value": 1},
        {"label": "Significantly reduced", "value": 2},
        {"label": "No movement", "value": 3}
    ]
},
{
    "id": 24,
    "text": "Contractions before 37 weeks?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Irregular", "value": 1},
        {"label": "Regular mild", "value": 2},
        {"label": "Regular strong", "value": 3}
    ]
},
{
    "id": 25,
    "text": "Fluid leaking?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Unsure", "value": 1},
        {"label": "Small leak", "value": 2},
        {"label": "Continuous leaking", "value": 3}
    ]
},
{
    "id": 26,
    "text": "Vaginal bleeding?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Spotting", "value": 1},
        {"label": "Moderate", "value": 2},
        {"label": "Heavy bleeding", "value": 3}
    ]
},
{
    "id": 27,
    "text": "Blood pressure?",
    "options": [
        {"label": "Normal", "value": 0},
        {"label": "Mildly elevated", "value": 1},
        {"label": "High", "value": 2},
        {"label": "Very high + symptoms", "value": 3}
    ]
},
{
    "id": 28,
    "text": "Severe abdominal pain?",
    "options": [
        {"label": "No", "value": 0},
        {"label": "Mild", "value": 1},
        {"label": "Persistent", "value": 2},
        {"label": "Sudden sharp severe", "value": 3}
    ]
},
{
    "id": 29,
    "text": "Fever/infection?",
    "options": [
        {"label": "None", "value": 0},
        {"label": "Mild fever", "value": 1},
        {"label": "Persistent fever", "value": 2},
        {"label": "With chills or discharge", "value": 3}
    ]
},
{
    "id": 30,
    "text": "Previous C-section complications or scar pain?",
    "options": [
        {"label": "No history", "value": 0},
        {"label": "Mild scar discomfort", "value": 1},
        {"label": "Persistent pain", "value": 2},
        {"label": "Sudden intense pain", "value": 3}
    ]
}
    ]
}

def calculate_risk(trimester: int, answers: dict) -> int:
    """
    Calculate risk score based on trimester and answers.

    :param trimester: trimester number (1, 2, or 3)
    :param answers: dict mapping question id to selected option value
    :return: total risk score
    """
    questions = QUIZ_QUESTIONS.get(trimester, [])
    total_score = 0
    for q in questions:
        qid = q["id"]
        val = answers.get(str(qid)) or answers.get(qid)
        if val is not None:
            total_score += int(val)
    return total_score
